(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{495:function(t,s,a){"use strict";a.r(s);var n=a(20),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"微信小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序"}},[t._v("#")]),t._v(" 微信小程序")]),t._v(" "),a("h2",{attrs:{id:"_1-起步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-起步"}},[t._v("#")]),t._v(" 1. 起步")]),t._v(" "),a("h3",{attrs:{id:"_1-1-小程序简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-小程序简介"}},[t._v("#")]),t._v(" 1.1 小程序简介")]),t._v(" "),a("h4",{attrs:{id:"_1-1-1-小程序与普通网页开发的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-小程序与普通网页开发的区别"}},[t._v("#")]),t._v(" 1.1.1 小程序与普通网页开发的区别")]),t._v(" "),a("p",[t._v("① 运行环境不同\n网页运行在浏览器环境中，小程序运行在微信环境中")]),t._v(" "),a("p",[t._v("② API 不同\n由于运行环境的不同，所以小程序中，无法调用 DOM 和 BOM 的 API。但是，小程序中可以调用微信环境提供的各种 API，例如： 地理定位、扫码、支付")]),t._v(" "),a("p",[t._v("③ 开发模式不同\n网页的开发模式：浏览器 + 代码编辑器。小程序有自己的一套标准开发模式：\n申请小程序开发账号、安装小程序开发者工具、创建和配置小程序项目")]),t._v(" "),a("h3",{attrs:{id:"_1-2-注册小程序开发帐号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-注册小程序开发帐号"}},[t._v("#")]),t._v(" 1.2 注册小程序开发帐号")]),t._v(" "),a("h3",{attrs:{id:"_1-3-小程序代码的构成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-小程序代码的构成"}},[t._v("#")]),t._v(" 1.3 小程序代码的构成")]),t._v(" "),a("h4",{attrs:{id:"_1-3-1-了解项目的基本组成结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-了解项目的基本组成结构"}},[t._v("#")]),t._v(" 1.3.1 了解项目的基本组成结构")]),t._v(" "),a("p",[t._v("① pages 用来存放所有小程序的页面\n② utils 用来存放工具性质的模块（例如：格式化时间的自定义模块）\n③ app.js 小程序项目的入口文件\n④ app.json 小程序项目的全局配置文件\n⑤ app.wxss 小程序项目的全局样式文件\n⑥ project.config.json 项目的配置文件\n⑦ sitemap.json 用来配置小程序及其页面是否允许被微信索引")]),t._v(" "),a("h4",{attrs:{id:"_1-3-2-小程序页面的组成部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-小程序页面的组成部分"}},[t._v("#")]),t._v(" 1.3.2 小程序页面的组成部分")]),t._v(" "),a("p",[t._v("小程序官方建议把所有小程序的页面，都存放在 pages 目录中，以单独的文件夹存在，如图所示：")]),t._v(" "),a("p",[t._v("其中，每个页面由 4 个基本文件组成，它们分别是：\n① .js 文件（页面的脚本文件，存放页面的数据、事件处理函数等）\n② .json 文件（当前页面的配置文件，配置窗口的外观、表现等）\n③ .wxml 文件（页面的模板结构文件）\n④ .wxss 文件（当前页面的样式表文件）")]),t._v(" "),a("h4",{attrs:{id:"_1-3-3-json-配置文件的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-3-json-配置文件的作用"}},[t._v("#")]),t._v(" 1.3.3 JSON 配置文件的作用")]),t._v(" "),a("p",[t._v("JSON 是一种数据格式，在实际开发中，JSON 总是以配置文件的形式出现。小程序项目中也不例外：通过不同的 .json 配置文件，可以对小程序项目进行不同级别的配置。\n小程序项目中有 4 种 json 配置文件，分别是：\n① 项目根目录中的 app.json 配置文件\n② 项目根目录中的 project.config.json 配置文件\n③ 项目根目录中的 sitemap.json 配置文件\n④ 每个页面文件夹中的 .json 配置文件")]),t._v(" "),a("h4",{attrs:{id:"_1-3-4-app-json-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-4-app-json-文件"}},[t._v("#")]),t._v(" 1.3.4  app.json 文件")]),t._v(" "),a("p",[t._v("app.json 是当前小程序的全局配置，包括了小程序的所有页面路径、窗口外观、界面表现、底部 tab 等。Demo 项目里边的 app.json 配置内容如下：")]),t._v(" "),a("p",[t._v("简单了解下这 4 个配置项的作用：\n① pages：用来记录当前小程序所有页面的路径\n② window：全局定义小程序所有页面的背景色、文字颜色等\n③ style：全局定义小程序组件所使用的样式版本\n④ sitemapLocation：用来指明 sitemap.json 的位置")]),t._v(" "),a("h4",{attrs:{id:"_1-3-4-project-config-json-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-4-project-config-json-文件"}},[t._v("#")]),t._v(" 1.3.4  project.config.json 文件")]),t._v(" "),a("p",[t._v("project.config.json 是项目配置文件，用来记录我们对小程序开发工具所做的个性化配置，例如：\nsetting 中保存了编译相关的配置\nprojectname 中保存的是项目名称\nappid 中保存的是小程序的账号 ID")]),t._v(" "),a("h4",{attrs:{id:"_1-3-5-sitemap-json-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-5-sitemap-json-文件"}},[t._v("#")]),t._v(" 1.3.5  sitemap.json 文件")]),t._v(" "),a("p",[t._v("微信现已开放小程序内搜索，效果类似于 PC 网页的 SEO。sitemap.json 文件用来配置小程序页面是否允许微信索引。\n当开发者允许微信索引时，微信会通过爬虫的形式，为小程序的页面内容建立索引。当用户的搜索关键字和页面的索引匹配成功的时候，小程序的页面将可能展示在搜索结果中。")]),t._v(" "),a("p",[t._v("注意：sitemap 的索引提示是默认开启的，如需要关闭 sitemap 的索引提示，可在小程序项目配置文件 project.config.json 的 setting 中配置字段 checkSiteMap 为 false")]),t._v(" "),a("h3",{attrs:{id:"_1-4-wxml-模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-wxml-模板"}},[t._v("#")]),t._v(" 1.4 WXML 模板")]),t._v(" "),a("p",[t._v("WXML（WeiXin Markup Language）是小程序框架设计的一套标签语言，用来构建小程序页面的结构，其作用类似于网页开发中的 HTML")]),t._v(" "),a("h3",{attrs:{id:"_1-5-wxss-样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-wxss-样式"}},[t._v("#")]),t._v(" 1.5 WXSS 样式")]),t._v(" "),a("p",[t._v("WXSS (WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式，类似于网页开发中的 CSS")]),t._v(" "),a("p",[t._v("① 新增了 rpx 尺寸单位\nCSS 中需要手动进行像素单位换算，例如 rem\nWXSS 在底层支持新的尺寸单位 rpx，在不同大小的屏幕上小程序会自动进行换算\n② 提供了全局的样式和局部样式\n项目根目录中的 app.wxss 会作用于所有小程序页面\n局部页面的 .wxss 样式仅对当前页面生效\n③ WXSS 仅支持部分 CSS 选择器\n.class 和 #id\nelement\n并集选择器、后代选择器\n::after 和 ::before 等伪类选择器")]),t._v(" "),a("h3",{attrs:{id:"_1-6-小程序中的-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-小程序中的-js-文件"}},[t._v("#")]),t._v(" 1.6  小程序中的 .js 文件")]),t._v(" "),a("p",[t._v("一个项目仅仅提供界面展示是不够的，在小程序中，我们通过 .js 文件来处理用户的操作。例如：响应用户的点击、获取用户的位置等等")]),t._v(" "),a("p",[t._v("小程序中的 JS 文件分为三大类，分别是：\n① app.js\n是整个小程序项目的入口文件，通过调用 App() 函数来启动整个小程序\n② 页面的 .js 文件\n是页面的入口文件，通过调用 Page() 函数来创建并运行页面\n③ 普通的 .js 文件\n是普通的功能模块文件，用来封装公共的函数或属性供页面使用")]),t._v(" "),a("h3",{attrs:{id:"_1-7-小程序中的组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-小程序中的组件"}},[t._v("#")]),t._v(" 1.7 小程序中的组件")]),t._v(" "),a("h4",{attrs:{id:"_1-7-1-组件的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-1-组件的分类"}},[t._v("#")]),t._v(" 1.7.1 组件的分类")]),t._v(" "),a("p",[t._v("小程序中的组件也是由宿主环境提供的，开发者可以基于组件快速搭建出漂亮的页面结构。官方把小程序的组\n件分为了 9 大类，分别是：\n① 视图容器\n② 基础内容\n③ 表单组件\n④ 导航组件\n⑤ 媒体组件\n⑥ map 地图组件\n⑦ canvas 画布组件\n⑧ 开放能力\n⑨ 无障碍访问")]),t._v(" "),a("h4",{attrs:{id:"_1-7-2-常用的视图容器类组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-2-常用的视图容器类组件"}},[t._v("#")]),t._v(" 1.7.2 常用的视图容器类组件")]),t._v(" "),a("p",[t._v("① view\n普通视图区域\n类似于 HTML 中的 div，是一个块级元素\n常用来实现页面的布局效果\n② scroll-view\n可滚动的视图区域\n常用来实现滚动列表效果\n③ swiper 和 swiper-item\n轮播图容器组件 和 轮播图 item 组件")]),t._v(" "),a("p",[t._v("​\tswiper 组件的常用属性")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/swiper%20%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_1-7-3-常用的基础内容组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-3-常用的基础内容组件"}},[t._v("#")]),t._v(" 1.7.3 常用的基础内容组件")]),t._v(" "),a("p",[t._v("① text\n文本组件\n类似于 HTML 中的 span 标签，是一个行内元素")]),t._v(" "),a("p",[t._v("​\t通过 text 组件的 selectable 属性，实现长按选中文本内容的效果：")]),t._v(" "),a("p",[t._v("② rich-text\n富文本组件\n支持把 HTML 字符串渲染为 WXML 结构")]),t._v(" "),a("p",[t._v("​\t通过 rich-text 组件的 nodes 属性节点，把 HTML 字符串渲染为对应的 UI 结构：")]),t._v(" "),a("h4",{attrs:{id:"_1-7-4-其他常用组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-4-其他常用组件"}},[t._v("#")]),t._v(" 1.7.4 其他常用组件")]),t._v(" "),a("p",[t._v("① button\n按钮组件\n功能比 HTML 中的 button 按钮丰富\n通过 open-type 属性可以调用微信提供的各种功能（客服、转发、获取用户授权、获取用户信息等）\n② image\n图片组件\nimage 组件默认宽度约 300px、高度约 240px")]),t._v(" "),a("p",[t._v("​\timage 组件的 mode 属性用来指定图片的裁剪和缩放模式，常用的 mode 属性值如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/image%E7%BB%84%E4%BB%B6%E7%9A%84mode%E5%B1%9E%E6%80%A7.png",alt:""}})]),t._v(" "),a("p",[t._v("③ navigator（后面课程会专门讲解）\n页面导航组件\n类似于 HTML 中的 a 链接")]),t._v(" "),a("h3",{attrs:{id:"_1-8-小程序的api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-小程序的api"}},[t._v("#")]),t._v(" 1.8 小程序的API")]),t._v(" "),a("p",[t._v("小程序官方把 API 分为了如下 3 大类：\n① 事件监听 API\n特点：以 on 开头，用来监听某些事件的触发\n举例：wx.onWindowResize(function callback) 监听窗口尺寸变化的事件\n② 同步 API\n特点1：以 Sync 结尾的 API 都是同步 API\n特点2：同步 API 的执行结果，可以通过函数返回值直接获取，如果执行出错会抛出异常\n举例：wx.setStorageSync('key', 'value') 向本地存储中写入内容\n③ 异步 API\n特点：类似于 jQuery 中的 $.ajax(options) 函数，需要通过 success、fail、complete 接收调用的结果\n举例：wx.request() 发起网络数据请求，通过 success 回调函数接收数据")]),t._v(" "),a("h2",{attrs:{id:"_2-模板与配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-模板与配置"}},[t._v("#")]),t._v(" 2. 模板与配置")]),t._v(" "),a("h3",{attrs:{id:"_2-1-wxml-模板语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-wxml-模板语法"}},[t._v("#")]),t._v(" 2.1  WXML 模板语法")]),t._v(" "),a("h4",{attrs:{id:"_2-1-1-数据绑定的基本原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-数据绑定的基本原则"}},[t._v("#")]),t._v(" 2.1.1 数据绑定的基本原则")]),t._v(" "),a("p",[t._v("① 在 data 中定义数据")]),t._v(" "),a("p",[t._v("在页面对应的 .js 文件中，把数据定义到 data 对象中即可。")]),t._v(" "),a("p",[t._v("② 在 WXML 中使用数据")]),t._v(" "),a("p",[t._v("把data中的数据绑定到页面中渲染，使用 Mustache 语法（双大括号）将变量包起来即可。")]),t._v(" "),a("p",[t._v("Mustache 语法的主要应用场景如下：\n绑定内容\n绑定属性\n运算（三元运算、算术运算等）")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v("Page({\n    data:{\n        info:'message',\n        msgList:[{msg:'hello'},{msg:'world'}]\n    }\n})\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ info }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h4",{attrs:{id:"_2-1-2-事件绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-事件绑定"}},[t._v("#")]),t._v(" 2.1.2 事件绑定")]),t._v(" "),a("p",[t._v("事件是渲染层到逻辑层的通讯方式。通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务的处理。")]),t._v(" "),a("p",[t._v("常用事件：tap、input、change")]),t._v(" "),a("p",[t._v("① 事件对象的属性列表")]),t._v(" "),a("p",[t._v("当事件回调触发的时候，会收到一个事件对象 event，它的详细属性如下表所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/event%E5%B1%9E%E6%80%A7.png",alt:""}})]),t._v(" "),a("p",[t._v("② target 和 currentTarget 的区别\ntarget 是触发该事件的源头组件，而 currentTarget 则是当前事件所绑定的组件。举例如下：\n点击内部的按钮时，点击事件以冒泡的方式向外扩散，也会触发外层 view 的 tap 事件处理函数。\n此时，对于外层的 view 来说：\ne.target 指向的是触发事件的源头组件，因此，e.target 是内部的按钮组件\ne.currentTarget 指向的是当前正在触发事件的那个组件，因此，e.currentTarget 是当前的 view 组件")]),t._v(" "),a("p",[t._v("③ bindtap 的语法格式")]),t._v(" "),a("p",[t._v("在小程序中，不存在 HTML 中的 onclick 鼠标点击事件，而是通过 tap 事件来响应用户的触摸行为。 通过 bindtap，可以为组件绑定 tap 触摸事件，在页面的 .js 文件中定义对应的事件处理函数，事件参数通过形参 event（一般简写成 e） 来接收")]),t._v(" "),a("p",[t._v("④ 在事件处理函数中为 data 中的数据赋值")]),t._v(" "),a("p",[t._v("⑤ 事件传参")]),t._v(" "),a("p",[t._v("小程序中的事件传参比较特殊，不能在绑定事件的同时为事件处理函数传递参数。")]),t._v(" "),a("p",[t._v("​\t\t如：bindtap=＂btnHandler(123)＂")]),t._v(" "),a("p",[t._v("可以为组件提供 data-* 自定义属性传参，其中 * 代表的是参数的名字")]),t._v(" "),a("p",[t._v("​\t\t最终： info 会被解析为参数的名字，数值 2 会被解析为参数的值")]),t._v(" "),a("p",[t._v('​\t\tbindtap=＂btnHandler(123)＂　data-info="'+t._s(2)+'"')]),t._v(" "),a("p",[t._v("在事件处理函数中，通过 event.target.dataset.参数名 即可获取到具体参数的值")]),t._v(" "),a("p",[t._v("​\t\t如： event.target.dataset.info")]),t._v(" "),a("h4",{attrs:{id:"_2-1-3-条件渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-条件渲染"}},[t._v("#")]),t._v(" 2.1.3 条件渲染")]),t._v(" "),a("p",[t._v("wx:if 与 hidden 的对比\n① 运行方式不同\nwx:if 以动态创建和移除元素的方式，控制元素的展示与隐藏\nhidden 以切换样式的方式（display: none/block;），控制元素的显示与隐藏\n② 使用建议\n频繁切换时，建议使用 hidden\n控制条件复杂时，建议使用 wx:if 搭配 wx:elif、wx:else 进行展示与隐藏的切换")]),t._v(" "),a("h4",{attrs:{id:"_2-1-4-列表渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4-列表渲染"}},[t._v("#")]),t._v(" 2.1.4 列表渲染")]),t._v(" "),a("p",[t._v("① wx:for\n通过 wx:for 可以根据指定的数组，循环渲染重复的组件结构。\n默认情况下，当前循环项的索引用 index 表示；当前循环项用 item 表示。")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("for")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{arr1}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n {{index}}--{{item}}\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("②  手动指定索引和当前项的变量名*\n使用 wx:for-index 可以指定当前循环项的索引的变量名\n使用 wx:for-item 可以指定当前项的变量名")]),t._v(" "),a("p",[t._v("③ 3. wx:key 的使用\n类似于 Vue 列表渲染中的 :key，小程序在实现列表渲染时，也建议为渲染出来的列表项指定唯一的 key 值，从而提高渲染的效率")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("for")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{arr1}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n {{index}}--{{item.name}}\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-2-wxss-模板样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-wxss-模板样式"}},[t._v("#")]),t._v(" 2.2 WXSS 模板样式")]),t._v(" "),a("p",[t._v("WXSS (WeiXin Style Sheets)是一套样式语言，用于美化 WXML 的组件样式，类似于网页开发中的 CSS。")]),t._v(" "),a("p",[t._v("WXSS 具有 CSS 大部分特性，同时，WXSS 还对 CSS 进行了扩充以及修改，以适应微信小程序的开发。\n与 CSS 相比，WXSS 扩展的特性有：rpx 尺寸单位、@import 样式导入")]),t._v(" "),a("h4",{attrs:{id:"_2-2-1-rpx-的实现原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-rpx-的实现原理"}},[t._v("#")]),t._v(" 2.2.1  rpx 的实现原理")]),t._v(" "),a("p",[t._v("rpx 的实现原理非常简单：鉴于不同设备屏幕的大小不同，为了实现屏幕的自动适配，rpx 把所有设备的屏幕，\n在宽度上等分为 750 份（即：当前屏幕的总宽度为 750rpx）。\n在较小的设备上，1rpx 所代表的宽度较小\n在较大的设备上，1rpx 所代表的宽度较大\n小程序在不同设备上运行的时候，会自动把 rpx 的样式单位换算成对应的像素单位来渲染，从而实现屏幕适配。")]),t._v(" "),a("h4",{attrs:{id:"_2-2-2-样式导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-样式导入"}},[t._v("#")]),t._v(" 2.2.2  样式导入")]),t._v(" "),a("p",[t._v("使用 WXSS 提供的 @import 语法，可以导入外联的样式表。")]),t._v(" "),a("p",[t._v('@import 后跟需要导入的外联样式表的相对路径，@import"common/common.wxss";')]),t._v(" "),a("h4",{attrs:{id:"_2-2-3-全局样式和局部样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-全局样式和局部样式"}},[t._v("#")]),t._v(" 2.2.3 全局样式和局部样式")]),t._v(" "),a("p",[t._v("① 全局样式")]),t._v(" "),a("p",[t._v("定义在 app.wxss 中的样式为全局样式，作用于每一个页面。")]),t._v(" "),a("p",[t._v("② 局部样式")]),t._v(" "),a("p",[t._v("在页面的 .wxss 文件中定义的样式为局部样式，只作用于当前页面。\n注意：\n当局部样式和全局样式冲突时，根据就近原则，局部样式会覆盖全局样式\n当局部样式的权重大于或等于全局样式的权重时，才会覆盖全局的样式")]),t._v(" "),a("h3",{attrs:{id:"_2-3-全局配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-全局配置"}},[t._v("#")]),t._v(" 2.3 全局配置")]),t._v(" "),a("h4",{attrs:{id:"_2-3-1-全局配置文件及常用的配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-全局配置文件及常用的配置项"}},[t._v("#")]),t._v(" 2.3.1 全局配置文件及常用的配置项")]),t._v(" "),a("p",[t._v("小程序根目录下的 app.json 文件是小程序的全局配置文件。常用的配置项如下：\n"),a("strong",[t._v("① pages")]),t._v("\n记录当前小程序所有页面的存放路径\n"),a("strong",[t._v("② window")]),t._v("\n全局设置小程序窗口的外观")]),t._v(" "),a("p",[t._v("window常用配置项")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/window%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E9%A1%B9.png",alt:""}})]),t._v(" "),a("p",[t._v("如：设置**导航栏标题，**设置步骤：app.json -> window -> navigationBarTitleText")]),t._v(" "),a("p",[t._v("​\t\t设置"),a("strong",[t._v("下拉刷新")]),t._v("，设置步骤：app.json -> window -> 把 enablePullDownRefresh 的值设置为 true。注意：在 app.json 中启用下拉刷新功能，会作用于每个小程序页面！")]),t._v(" "),a("p",[t._v("​\t\t设置"),a("strong",[t._v("下拉刷新时窗口的背景色")]),t._v("，app.json -> window -> 为 backgroundColor 指定16进制的颜色值 #efefef。")]),t._v(" "),a("p",[t._v("​\t\t设置下"),a("strong",[t._v("拉刷新时 loading 的样式")]),t._v("，app.json -> window -> 为 backgroundTextStyle 指定 dark 值。")]),t._v(" "),a("p",[t._v("​\t\t设置"),a("strong",[t._v("上拉触底的距离")]),t._v("，app.json -> window -> 为 onReachBottomDistance ，默认50px")]),t._v(" "),a("p",[a("strong",[t._v("③ tabBar")]),t._v("\n设置小程序底部的 tabBar 效果")]),t._v(" "),a("p",[t._v("tabBar中只能配置最少2个、最多 5个tab页签，当渲染顶部 tabBar 时，不显示 icon，只显示文本")]),t._v(" "),a("p",[t._v("（1）tabBar组成部分：")]),t._v(" "),a("p",[t._v("① backgroundColor：tabBar 的背景色\n② selectedIconPath：选中时的图片路径\n③ borderStyle：tabBar 上边框的颜色\n④ iconPath：未选中时的图片路径\n⑤ selectedColor：tab 上的文字选中时的颜色\n⑥ color：tab 上文字的默认（未选中）颜色")]),t._v(" "),a("p",[t._v("（2）tabBar 节点的配置项")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/tabBar%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE%E9%A1%B9.png",alt:""}})]),t._v(" "),a("p",[t._v("（3）tabBar配置项")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/tabBar%E9%85%8D%E7%BD%AE%E9%A1%B9.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("④ style")]),t._v("\n是否启用新版的组件样式")]),t._v(" "),a("h3",{attrs:{id:"_2-4-页面配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-页面配置"}},[t._v("#")]),t._v(" 2.4 页面配置")]),t._v(" "),a("p",[t._v("页面配置与全局配置")]),t._v(" "),a("p",[t._v("小程序中，app.json 中的 window 节点，可以全局配置小程序中每个页面的窗口表现。\n如果某些小程序页面想要拥有特殊的窗口表现，此时，“页面级别的 .json 配置文件”就可以实现这种需求。\n注意：当页面配置与全局配置冲突时，根据就近原则，最终的效果以页面配置为准。")]),t._v(" "),a("p",[t._v("页面配置常用配置项")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E9%A1%B9.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_2-5-网络数据请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-网络数据请求"}},[t._v("#")]),t._v(" 2.5 网络数据请求")]),t._v(" "),a("h4",{attrs:{id:"_2-5-1-小程序中网络数据请求的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-小程序中网络数据请求的限制"}},[t._v("#")]),t._v(" 2.5.1 小程序中网络数据请求的限制")]),t._v(" "),a("p",[t._v("出于安全性方面的考虑，小程序官方对数据接口的请求做出了如下\n两个限制：\n① 只能请求 HTTPS 类型的接口\n② 必须将接口的域名添加到信任列表中")]),t._v(" "),a("h4",{attrs:{id:"_2-5-2-配置-request-合法域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-配置-request-合法域名"}},[t._v("#")]),t._v(" 2.5.2 配置 request 合法域名")]),t._v(" "),a("p",[t._v("需求描述：假设在自己的微信小程序中，希望请求 https://www.escook.cn/ 域名下的接口\n配置步骤：登录微信小程序管理后台 -> 开发 -> 开发设置 -> 服务器域名 -> 修改 request 合法域名\n注意事项：\n① 域名只支持 https 协议\n② 域名不能使用 IP 地址或 localhost\n③ 域名必须经过 ICP 备案\n④ 服务器域名一个月内最多可申请 5 次修改")]),t._v(" "),a("h4",{attrs:{id:"_2-5-3-发起get-请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-发起get-请求"}},[t._v("#")]),t._v(" 2.5.3 发起GET 请求")]),t._v(" "),a("p",[t._v("调用微信小程序提供的 wx.request() 方法，可以发起 GET 、POST数据请求")]),t._v(" "),a("h4",{attrs:{id:"_2-5-4-在页面刚加载时请求数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-在页面刚加载时请求数据"}},[t._v("#")]),t._v(" 2.5.4 在页面刚加载时请求数据")]),t._v(" "),a("p",[t._v("在很多情况下，我们需要在页面刚加载的时候，自动请求一些初始化的数据。此时需要在页面的 onLoad 事件中调用获取数据的函数")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("onload："),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSwiper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGridList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h4",{attrs:{id:"_2-5-5-跳过request合肥域名校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-5-跳过request合肥域名校验"}},[t._v("#")]),t._v(" 2.5.5 跳过request合肥域名校验")]),t._v(" "),a("p",[t._v("如果后端程序员仅仅提供了 http 协议的接口、暂时没有提供 https 协议的接口。\n此时为了不耽误开发的进度，我们可以在微信开发者工具中，临时开启「开发环境不校验请求域名、TLS 版本及 HTTPS 证书」选项，跳过 request 合法域名的校验。（在本地设置中）\n注意：跳过 request 合法域名校验的选项，仅限在开发与调试阶段使用！")]),t._v(" "),a("h4",{attrs:{id:"_2-5-6-关于跨域和ajax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-6-关于跨域和ajax"}},[t._v("#")]),t._v(" 2.5.6 关于跨域和Ajax")]),t._v(" "),a("p",[t._v("跨域问题只存在于基于浏览器的 Web 开发中。由于小程序的宿主环境不是浏览器，而是微信客户端，所以小程序中不存在跨域的问题。\nAjax 技术的核心是依赖于浏览器中的 XMLHttpRequest 这个对象，由于小程序的宿主环境是微信客户端，所以小程序中不能叫做“发起 Ajax 请求”，而是叫做“发起网络数据请求”。")]),t._v(" "),a("h2",{attrs:{id:"_3-视图与逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-视图与逻辑"}},[t._v("#")]),t._v(" 3. 视图与逻辑")]),t._v(" "),a("h3",{attrs:{id:"_3-1-页面导航"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-页面导航"}},[t._v("#")]),t._v(" 3.1 页面导航")]),t._v(" "),a("p",[t._v("页面导航指的是页面之间的相互跳转。")]),t._v(" "),a("p",[t._v("例如，浏览器中实现页面导航的方式有如下两种：\n①  链接\n② location.href")]),t._v(" "),a("p",[t._v("小程序中实现页面导航的两种方式")]),t._v(" "),a("p",[t._v("① 声明式导航\n在页面上声明一个  导航组件\n通过点击  组件实现页面跳转\n② 编程式导航\n调用小程序的导航 API，实现页面的跳转")]),t._v(" "),a("h4",{attrs:{id:"_3-1-1-声明式导航"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-声明式导航"}},[t._v("#")]),t._v(" 3.1.1 声明式导航")]),t._v(" "),a("p",[a("strong",[t._v("（1） 导航到tabBar页面")])]),t._v(" "),a("p",[t._v("tabBar 页面指的是被配置为 tabBar 的页面。\n在使用  组件跳转到指定的 tabBar 页面时，需要指定 url 属性和 open-type 属性，其中：\nurl 表示要跳转的页面的地址，必须以 / 开头\nopen-type 表示跳转的方式，必须为 switchTab")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("navigator")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/pages/message/message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("open-type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("switchTab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("go"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("navigator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("（2） 导航到非tabBar页面")])]),t._v(" "),a("p",[t._v("非 tabBar 页面指的是没有被配置为 tabBar 的页面。\n在使用  组件跳转到普通的非 tabBar 页面时，则需要指定 url 属性和 open-type 属性，其中：\nurl 表示要跳转的页面的地址，必须以 / 开头\nopen-type 表示跳转的方式，必须为 navigate")]),t._v(" "),a("p",[t._v('注意：为了简便，在导航到非 tabBar 页面时，open-type="navigate" 属性可以省略。')]),t._v(" "),a("p",[a("strong",[t._v("（3）后退导航")])]),t._v(" "),a("p",[t._v("如果要后退到上一页面或多级页面，则需要指定 open-type 属性和 delta 属性，其中：\nopen-type 的值必须是 navigateBack，表示要进行后退导航\ndelta 的值必须是数字，表示要后退的层级")]),t._v(" "),a("p",[t._v("注意：为了简便，如果只是后退到上一页面，则可以省略 delta 属性，因为其默认值就是 1。")]),t._v(" "),a("h4",{attrs:{id:"_3-1-2-编程式导航"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-编程式导航"}},[t._v("#")]),t._v(" 3.1.2 编程式导航")]),t._v(" "),a("p",[a("strong",[t._v("（1） 导航到tabBar页面")])]),t._v(" "),a("p",[t._v("调用 wx.switchTab(Object object) 方法，可以跳转到 tabBar 页面。其中 Object 参数对象的属性列表如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/%E8%B7%B3%E8%BD%ACtabBar.png",alt:""}})]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("go"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("goto"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    go(){\n        wx.switchTab({\n          url: '/pages/message/message',\n        })\n    },\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("strong",[t._v("（2） 导航到非tabBar页面")])]),t._v(" "),a("p",[t._v("调用 wx.navigateTo(Object object) 方法，可以跳转到非 tabBar 的页面。其中 Object 参数对象的属性列表如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/%E8%B7%B3%E8%BD%AC%E9%9D%9EtabBar.png",alt:""}})]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("go"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("goto"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    go(){\n        wx.navigateTo({\n          url: '/pages/info/info',\n        })\n    },\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("strong",[t._v("（3）后退导航")])]),t._v(" "),a("p",[t._v("调用 wx.navigateBack(Object object) 方法，可以返回上一页面或多级页面。其中 Object 参数对象可选的属性列表如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/%E5%90%8E%E9%80%80%E5%AF%BC%E8%88%AA.png",alt:""}})]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("go"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("goto"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    go(){\n        wx.navigateBack()\n    },\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"_3-1-3-导航传参"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-导航传参"}},[t._v("#")]),t._v(" 3.1.3 导航传参")]),t._v(" "),a("p",[a("strong",[t._v("（1）声明式导航传参")])]),t._v(" "),a("p",[t._v("navigator 组件的 url 属性用来指定将要跳转到的页面的路径。同时，路径的后面还可以携带参数：\n参数与路径之间使用 ? 分隔\n参数键与参数值用 = 相连\n不同参数用 & 分隔")]),t._v(" "),a("p",[a("strong",[t._v("（2）编程式导航传参")])]),t._v(" "),a("p",[t._v("调用 wx.navigateTo(Object object) 方法跳转页面时，也可以携带参数，代码示例如下")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("go"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("goto"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    go(){\n        wx.navigateTo({\n          url: '/pages/info/info?name=zs&age=20',\n        })\n    },\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("strong",[t._v("（3）在onLoad中接收导航参数")])]),t._v(" "),a("p",[t._v("通过声明式导航传参或编程式导航传参所携带的参数，可以直接在 onLoad 事件中直接获取到，示例代码如下：(在跳转去的页面的js文件中)")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v("onLoad: function (options) {\n\tconsole.log(options)\n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("通过在onLoad函数中，this.setData({ query: options }) 可以将参数存到data中")]),t._v(" "),a("h3",{attrs:{id:"_3-2-页面事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-页面事件"}},[t._v("#")]),t._v(" 3.2 页面事件")]),t._v(" "),a("h4",{attrs:{id:"_3-2-1-下拉刷新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-下拉刷新"}},[t._v("#")]),t._v(" 3.2.1 下拉刷新")]),t._v(" "),a("p",[a("strong",[t._v("（1）启用下拉刷新有两种方式：")]),t._v("\n① 全局开启下拉刷新\n在 app.json 的 window 节点中，将 enablePullDownRefresh 设置为 true\n② 局部开启下拉刷新\n在页面的 .json 配置文件中，将 enablePullDownRefresh 设置为 true\n在实际开发中，推荐使用第 2 种方式，为需要的页面单独开启下拉刷新的效果。")]),t._v(" "),a("p",[a("strong",[t._v("（2）配置下拉刷新窗口的样式")]),t._v("\n在全局或页面的 .json 配置文件中，通过 backgroundColor 和 backgroundTextStyle 来配置下拉刷新窗口的样式，其中：\nbackgroundColor 用来配置下拉刷新窗口的背景颜色，仅支持16 进制的颜色值\nbackgroundTextStyle 用来配置下拉刷新 loading 的样式，仅支持 dark 和 light")]),t._v(" "),a("p",[a("strong",[t._v("（3） 监听页面的下拉刷新事件")]),t._v("\n在页面的 .js 文件中，通过 onPullDownRefresh() 函数即可监听当前页面的下拉刷新事件。\n例如，在页面的 wxml 中有如下的 UI 结构，点击按钮可以让 count 值自增 +1：")]),t._v(" "),a("p",[t._v("在触发页面的下拉刷新事件的时候，如果要把 count 的值重置为 0，示例代码如下：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("view "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("view"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button bindtap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onPullDownRefresh")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[a("strong",[t._v("（4）停止下拉刷新的效果")]),t._v("\n当处理完下拉刷新后，下拉刷新的 loading 效果会一直显示，不会主动消失，所以需要手动隐藏下拉刷新的loading 效果。此时，调用 wx.stopPullDownRefresh() 可以停止当前页面的下拉刷新。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onPullDownRefresh")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   \t "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nwx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopPullDownRefresh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h4",{attrs:{id:"_3-2-2-上拉触底事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-上拉触底事件"}},[t._v("#")]),t._v(" 3.2.2 上拉触底事件")]),t._v(" "),a("p",[t._v("监听页面的上拉触底事件\n在页面的 .js 文件中，通过 onReachBottom() 函数即可监听当前页面的上拉触底事件。")]),t._v(" "),a("p",[t._v("上拉触底距离指的是触发上拉触底事件时，滚动条距离页面底部的距离。\n可以在全局或页面的 .json 配置文件中，通过 onReachBottomDistance 属性来配置上拉触底的距离。小程序默认的触底距离是 50px，在实际开发中，可以根据自己的需求修改这个默认值。")]),t._v(" "),a("p",[t._v("节流处理：")]),t._v(" "),a("p",[t._v("① 在 data 中定义 isloading 节流阀\nfalse 表示当前没有进行任何数据请求\ntrue 表示当前正在进行数据请求\n② 在 getColors() 方法中修改 isloading 节流阀的值\n在刚调用 getColors 时将节流阀设置 true\n在网络请求的 complete 回调函数中，将节流阀重置为 false\n③ 在 onReachBottom 中判断节流阀的值，从而对数据请求进行节流控制\n如果节流阀的值为 true，则阻止当前请求\n如果节流阀的值为 false，则发起数据请求")]),t._v(" "),a("h3",{attrs:{id:"_3-3-生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-生命周期"}},[t._v("#")]),t._v(" 3.3 生命周期")]),t._v(" "),a("p",[t._v("生命周期（Life Cycle）是指一个对象从创建 -> 运行 -> 销毁的整个阶段，强调的是一个时间段。例如：\n张三出生，表示这个人生命周期的开始\n张三离世，表示这个人生命周期的结束\n中间张三的一生，就是张三的生命周期\n我们可以把每个小程序运行的过程，也概括为生命周期：\n小程序的启动，表示生命周期的开始\n小程序的关闭，表示生命周期的结束\n中间小程序运行的过程，就是小程序的生命周期")]),t._v(" "),a("h4",{attrs:{id:"_3-3-1-生命周期的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-生命周期的分类"}},[t._v("#")]),t._v(" 3.3.1 生命周期的分类")]),t._v(" "),a("p",[t._v("在小程序中，生命周期分为两类，分别是：\n① 应用生命周期\n特指小程序从启动 -> 运行 -> 销毁的过程\n② 页面生命周期\n特指小程序中，每个页面的加载 -> 渲染 -> 销毁的过程")]),t._v(" "),a("h4",{attrs:{id:"_3-3-2-什么是生命周期函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-什么是生命周期函数"}},[t._v("#")]),t._v(" 3.3.2 什么是生命周期函数")]),t._v(" "),a("p",[t._v("生命周期函数：是由小程序框架提供的内置函数，会伴随着生命周期，自动按次序执行。\n生命周期函数的作用：允许程序员在特定的时间点，执行某些特定的操作。例如，页面刚加载的时候，可以在onLoad 生命周期函数中初始化页面的数据。\n注意：生命周期强调的是时间段，生命周期函数强调的是时间点。")]),t._v(" "),a("h4",{attrs:{id:"_3-3-3-生命周期函数的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-生命周期函数的分类"}},[t._v("#")]),t._v(" 3.3.3 生命周期函数的分类")]),t._v(" "),a("p",[t._v("小程序中的生命周期函数分为两类，分别是：\n① 应用的生命周期函数\n特指小程序从启动 -> 运行 -> 销毁期间依次调用的那些函数\n② 页面的生命周期函数\n特指小程序中，每个页面从加载 -> 渲染 -> 销毁期间依次调用的那些函数")]),t._v(" "),a("h3",{attrs:{id:"_3-4-wxs脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-wxs脚本"}},[t._v("#")]),t._v(" 3.4 wxs脚本")]),t._v(" "),a("p",[t._v("WXS（WeiXin Script）是小程序独有的一套脚本语言，结合 WXML，可以构建出页面的结构")]),t._v(" "),a("p",[t._v("wxml 中无法调用在页面的 .js 中定义的函数，但是，wxml 中可以调用 wxs 中定义的函数。因此，小程序中wxs 的典型应用场景就是“过滤器”。")]),t._v(" "),a("h4",{attrs:{id:"_3-4-3-wxs-和-javascript-的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-3-wxs-和-javascript-的关系"}},[t._v("#")]),t._v(" 3.4.3 wxs 和 JavaScript 的关系")]),t._v(" "),a("p",[t._v("① wxs 有自己的数据类型\nnumber 数值类型、string 字符串类型、boolean 布尔类型、object 对象类型、\nfunction 函数类型、array 数组类型、 date 日期类型、 regexp 正则\n② wxs 不支持类似于 ES6 及以上的语法形式\n不支持：let、const、解构赋值、展开运算符、箭头函数、对象属性简写、etc...\n支持：var 定义变量、普通 function 函数等类似于 ES5 的语法\n③ wxs 遵循 CommonJS 规范\nmodule 对象\nrequire() 函数\nmodule.exports 对象")]),t._v(" "),a("h4",{attrs:{id:"_3-4-2-基础语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-基础语法"}},[t._v("#")]),t._v(" 3.4.2 基础语法")]),t._v(" "),a("p",[t._v("① 内嵌")]),t._v(" "),a("p",[t._v("wxs 代码可以编写在 wxml 文件中的  标签内，就像 Javascript 代码可以编写在 html 文件中的")]),t._v(" "),a("p",[a("code",[t._v("<script>")]),t._v("标签内一样。wxml 文件中的每个 "),a("code",[t._v("<wxs></wxs>")]),t._v("标签，必须提供 module 属性，用来指定当前 wxs 的模块名称，方便在wxml 中访问模块中的成员.模块内要module.export函数方法")]),t._v(" "),a("p",[t._v("② 外联")]),t._v(" "),a("p",[t._v("wxs 代码还可以编写在以 .wxs 为后缀名的文件内，就像 javascript 代码可以编写在以 .js 为后缀名的文件中一样。模块内要module.export函数方法")]),t._v(" "),a("p",[t._v("引入外联wxs脚本需要添加module和src属性")]),t._v(" "),a("p",[a("code",[t._v('<wxs src="../../utils/tools.wxs" module="m2"></wxs>')])]),t._v(" "),a("h4",{attrs:{id:"_3-4-3-wxs的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-3-wxs的特点"}},[t._v("#")]),t._v(" 3.4.3 wxs的特点")]),t._v(" "),a("p",[t._v("① 与 JavaScript 不同\n为了降低 wxs（WeiXin Script）的学习成本， wxs 语言在设计时借大量鉴了 JavaScript 的语法。但是本质上，wxs 和 JavaScript 是完全不同的两种语言！")]),t._v(" "),a("p",[t._v("② 不能作为组件的事件回调\nwxs 典型的应用场景就是“过滤器”，经常配合 Mustache 语法进行使用，如：tolower")]),t._v(" "),a("p",[t._v("但是，在 wxs 中定义的函数不能作为组件的事件回调函数。比如button事件")]),t._v(" "),a("p",[t._v("③ 隔离性")]),t._v(" "),a("p",[t._v("隔离性指的是 wxs 的运行环境和其他 JavaScript 代码是隔离的。体现在如下两方面：\nwxs 不能调用 js 中定义的函数、 wxs 不能调用小程序提供的 API")]),t._v(" "),a("p",[t._v("④ 性能好")]),t._v(" "),a("p",[t._v("在 iOS 设备上，小程序内的 WXS 会比 JavaScript 代码快 2 ~ 20 倍、在 android 设备上，二者的运行效率无差")]),t._v(" "),a("h2",{attrs:{id:"_4-基础加强"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-基础加强"}},[t._v("#")]),t._v(" 4. 基础加强")]),t._v(" "),a("h3",{attrs:{id:"_4-1-组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-组件"}},[t._v("#")]),t._v(" 4.1 组件")]),t._v(" "),a("h4",{attrs:{id:"_4-1-1-组件的创建与引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-组件的创建与引用"}},[t._v("#")]),t._v(" 4.1.1 组件的创建与引用")]),t._v(" "),a("p",[t._v("根目录下创建component文件夹，右击文件夹新建component组件")]),t._v(" "),a("p",[t._v("① 局部引用")]),t._v(" "),a("p",[t._v("然后在page中选择要引用的 父组件，在父组件json文件中注册子组件：usingComponents：{}")]),t._v(" "),a("p",[t._v("在父组件的wxml文件中使用组件"),a("code",[t._v("<son></son>")])]),t._v(" "),a("p",[t._v("② 全局引用")]),t._v(" "),a("p",[t._v('在app.json中"usingComponents":{"son":/components/son}')]),t._v(" "),a("h4",{attrs:{id:"_4-1-2-组件和页面的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-组件和页面的区别"}},[t._v("#")]),t._v(" 4.1.2 组件和页面的区别")]),t._v(" "),a("p",[t._v('从表面来看，组件和页面都是由 .js、.json、.wxml 和 .wxss 这四个文件组成的。但是，组件和页面的 .js 与\n.json 文件有明显的不同：\n组件的 .json 文件中需要声明 "component": true 属性\n组件的 .js 文件中调用的是 Component() 函数------page()函数\n组件的事件处理函数需要定义到 methods 节点中----data平级')]),t._v(" "),a("h4",{attrs:{id:"_4-1-3-组件样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-组件样式"}},[t._v("#")]),t._v(" 4.1.3 组件样式")]),t._v(" "),a("p",[t._v("① 默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的\nUI 结构，如图所示：\n组件 A 的样式不会影响组件 C 的样式\n组件 A 的样式不会影响小程序页面的样式\n小程序页面的样式不会影响组件 A 和 C 的样式\n好处： 防止外界的样式影响组件内部的样式、防止组件的样式破坏外界的样式")]),t._v(" "),a("p",[t._v("② 注意：app.wxss 中的全局样式对组件无效\n只有 class 选择器会有样式隔离效果，id 选择器、属性选择器、标签选择器不受样式隔离的影响\n建议：在组件和引用组件的页面中建议使用 class 选择器，不要使用 id、属性、标签选择器！")]),t._v(" "),a("p",[t._v("③ 修改组件的样式隔离选项\n默认情况下，自定义组件的样式隔离特性能够防止组件内外样式互相干扰的问题。但有时，我们希望在外界能够控制组件内部的样式，此时，可以通过 styleIsolation 修改组件的样式隔离选项。")]),t._v(" "),a("p",[t._v('在js的components中options:{ styleIsolation:"isolated"}')]),t._v(" "),a("p",[t._v('或者在json中 { "styleIsolation": "isolated" }')]),t._v(" "),a("p",[t._v("styleIsolation可选值：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/ur-not/picture_wx/raw/master/styleIsolation.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_4-1-4-数据、方法、属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-4-数据、方法、属性"}},[t._v("#")]),t._v(" 4.1.4 数据、方法、属性")]),t._v(" "),a("p",[t._v("① 数据 ：在小程序组件中，用于组件模板渲染的私有数据，需要定义到 data 节点中，")]),t._v(" "),a("p",[t._v("② 方法：在小程序组件中，事件处理函数和自定义方法需要定义到 methods 节点中")]),t._v(" "),a("p",[t._v("自定义方法建议以下划线开头，与事件处理函数区分")]),t._v(" "),a("p",[t._v("③ 属性：在小程序组件中，properties 是组件的对外属性，用来接收外界传递到组件中的数据，")]),t._v(" "),a("p",[t._v(". data 和 properties 的区别\n在小程序的组件中，properties 属性和 data 数据的用法相同，它们都是可读可写的，只不过：\ndata 更倾向于存储组件的私有数据\nproperties 更倾向于存储外界传递到组件中的数据")]),t._v(" "),a("p",[t._v("由于 data 数据和 properties 属性在本质上没有任何区别，因此 properties 属性的值也可以用于页面渲染，或使用 setData 为 properties 中的属性重新赋值")]),t._v(" "),a("h4",{attrs:{id:"_4-1-5-数据监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-5-数据监听器"}},[t._v("#")]),t._v(" 4.1.5 数据监听器")]),t._v(" "),a("p",[t._v("数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作。它的作用类似于 vue 中的watch 侦听器。在小程序组件中，数据监听器的基本语法格式如下：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("observers："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'字段A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'字段B'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("字段"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v("新值，字段"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),t._v("新值")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" something\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"_4-1-6-纯数据字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-6-纯数据字段"}},[t._v("#")]),t._v(" 4.1.6 纯数据字段")]),t._v(" "),a("p",[t._v("纯数据字段指的是那些不用于界面渲染的 data 字段。\n应用场景：例如有些情况下，某些 data 中的字段既不会展示在界面上，也不会传递给其他组件，仅仅在当前组件内部使用。带有这种特性的 data 字段适合被设置为纯数据字段。\n好处：纯数据字段有助于提升页面更新的性能。")]),t._v(" "),a("p",[t._v("① 定义纯数据字段")]),t._v(" "),a("p",[t._v("在 Component 构造器的 options 节点中，指定 pureDataPattern 为一个正则表达式，字段名符合这个正则表达式的字段将成为纯数据字段")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v("Component({\noptions:{\n\t//\t指定以_开头的数据作为纯数据字段\n\tpureDataPattern:/^_/\n\t}\n}),\ndata:{\n\ta:true,\n\t_b:true\n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h4",{attrs:{id:"_4-1-7-组件的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-7-组件的生命周期"}},[t._v("#")]),t._v(" 4.1.7 组件的生命周期")]),t._v(" "),a("p",[t._v("在小程序组件中，最重要的生命周期函数有 3 个，分别是 created、attached、detached。它们各自的特点如下：\n① 组件实例刚被创建好的时候，created 生命周期函数会被触发\n此时还不能调用 setData\n通常在这个生命周期函数中，只应该用于给组件的 this 添加一些自定义的属性字段\n② 在组件完全初始化完毕、进入页面节点树后， attached 生命周期函数会被触发\n此时， this.data 已被初始化完毕\n这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行（例如发请求获取初始数据）\n③ 在组件离开页面节点树后， detached 生命周期函数会被触发\n退出一个页面时，会触发页面内每个自定义组件的 detached 生命周期函数\n此时适合做一些清理性质的工作")]),t._v(" "),a("p",[a("strong",[t._v("定义生命周期函数")])]),t._v(" "),a("p",[t._v("在小程序组件中，生命周期函数可以直接定义在 Component 构造器的第一级参数中，可以在 lifetimes 字段内进行声明（这是推荐的方式，其优先级最高）。")]),t._v(" "),a("h4",{attrs:{id:"_4-1-8-组件所在页面的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-8-组件所在页面的生命周期"}},[t._v("#")]),t._v(" 4.1.8 组件所在页面的生命周期")]),t._v(" "),a("p",[t._v("有时，自定义组件的行为依赖于页面状态的变化，此时就需要用到组件所在页面的生命周期。\n例如：每当触发页面的 show 生命周期函数的时候，希望能够重新生成一个随机的 RGB 颜色值。\n在自定义组件中，组件所在页面的生命周期函数有如下 3 个，分别是：show、hide、resize")]),t._v(" "),a("p",[t._v("组件所在页面的生命周期函数，需要定义在 pageLifetimes 节点中")]),t._v(" "),a("p",[t._v("pageLifetimes: { show:function(){ }  }")]),t._v(" "),a("h4",{attrs:{id:"_4-1-9-插槽"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-9-插槽"}},[t._v("#")]),t._v(" 4.1.9 插槽")]),t._v(" "),a("p",[t._v("在自定义组件的 wxml 结构中，可以提供一个节点（插槽）,用于承载组件使用者提供的 wxml 结构")]),t._v(" "),a("p",[t._v("在子组件中的html中添加一个插槽标签"),a("code",[t._v("<slot></slot>")])]),t._v(" "),a("p",[t._v("在父组件中的子组件引入位置："),a("code",[t._v("<son>定义子组件插槽的内容</son>")])]),t._v(" "),a("p",[t._v("① 单个插槽")]),t._v(" "),a("p",[t._v("在小程序中，默认每个自定义组件中只允许使用一个slot进行占位，这种个数上的限制叫做单个插槽")]),t._v(" "),a("p",[t._v("② 多个插槽")]),t._v(" "),a("p",[t._v("在小程序的自定义组件中，需要使用多个插槽时，可以在子组件的 .js 文件中配置")]),t._v(" "),a("p",[t._v("options:{ multilpleSlots:true }")]),t._v(" "),a("p",[t._v("​\t可以在子组件的 .wxml 中使用多个slot标签，以不同的 name 来区分不同的插槽。")]),t._v(" "),a("p",[t._v("​\t在父组件的定义内容时指定插槽名称："),a("code",[t._v('<son><view slot="name">内容</view></son>')])]),t._v(" "),a("h4",{attrs:{id:"_4-1-10-父子组件之间的通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-10-父子组件之间的通信"}},[t._v("#")]),t._v(" 4.1.10 父子组件之间的通信")]),t._v(" "),a("p",[t._v("父子组件之间通信的 3 种方式\n"),a("strong",[t._v("（1） 属性绑定")]),t._v("\n用于父组件向子组件的指定属性设置数据，仅能设置 JSON 兼容的数据")]),t._v(" "),a("p",[t._v("​\t父向子传值，而且只能传递普通类型的数据，无法将方法传递给子组件")]),t._v(" "),a("p",[t._v("父组件的data，在父组件的子组件标签中定义，"),a("code",[t._v("<son a="+t._s(t.data)+"></son>")])]),t._v(" "),a("p",[t._v("在子组件的properties中接收数据并声明数据类型：properties{ a:Number }")]),t._v(" "),a("p",[a("strong",[t._v("（2） 事件绑定")]),t._v("\n用于子组件向父组件传递数据，可以传递任意数据")]),t._v(" "),a("p",[t._v("① 在父组件的 js 中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件\n② 在父组件的 wxml 中，通过bind:事件名的形式，将步骤 1 中定义的函数引用，传递给子组件")]),t._v(" "),a("p",[a("code",[t._v('<son bind:sync="函数名"></son>')])]),t._v(" "),a("p",[t._v("③ 在子组件的 js 中，在button事件函数中，通过调用 this.triggerEvent('自定义事件名称', { /* 参数对象 */ }) ，将数据发送到父组件")]),t._v(" "),a("p",[t._v("this.triggerEvent('sync',{value:   })")]),t._v(" "),a("p",[t._v("④ 在父组件的 js 中，通过 e.detail 获取到子组件传递过来的数据")]),t._v(" "),a("p",[t._v("在函数中，this.setData{num：e.detail.value}")]),t._v(" "),a("p",[t._v("函数在父组件中定义，但在子组件中调用，调用时传参，即把数据传给了父组件")]),t._v(" "),a("p",[a("strong",[t._v("（3） 获取组件实例")]),t._v('\n父组件还可以通过 this.selectComponent() 获取子组件实例对象\n这样就可以直接访问子组件的任意数据和方法，调用时需要传入一个选择器，例如 this.selectComponent(".my-component")')]),t._v(" "),a("p",[t._v("先在父组件的子组件标签中，添加class或者id选择")]),t._v(" "),a("p",[t._v('给父组件的button定义事件函数，在事件处理函数中 const son = this.selectComponent("类名")')]),t._v(" "),a("p",[t._v("son.setData({}), son.子组件中的方法名()")]),t._v(" "),a("h4",{attrs:{id:"_4-1-11-behaviors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-11-behaviors"}},[t._v("#")]),t._v(" 4.1.11 behaviors")]),t._v(" "),a("p",[t._v("behaviors 是小程序中，用于实现组件间代码共享的特性，类似于 Vue.js 中的 “mixins”")]),t._v(" "),a("p",[t._v("每个 behavior 可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和方法会被合并到组件中。module.exports = behaviors名({})\n每个组件可以引用多个 behavior，behavior 也可以引用其它 behavior")]),t._v(" "),a("p",[t._v("在组件中，使用 require() 方法导入需要的 behavior，挂载后即可访问 behavior 中的数据或方法")]),t._v(" "),a("p",[t._v("behavior 中所有可用的节点")]),t._v(" "),a("h3",{attrs:{id:"_4-2-使用-npm-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-使用-npm-包"}},[t._v("#")]),t._v(" 4.2 使用 npm 包")]),t._v(" "),a("p",[t._v("小程序对 npm 的支持与限制")]),t._v(" "),a("p",[t._v("目前，小程序中已经支持使用 npm 安装第三方包，从而来提高小程序的开发效率。但是，在小程序中使用npm 包有如下 3 个限制：\n① 不支持依赖于 Node.js 内置库的包\n② 不支持依赖于浏览器内置对象的包\n③ 不支持依赖于 C++ 插件的包")]),t._v(" "),a("h4",{attrs:{id:"_4-2-1-vant-weapp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-vant-weapp"}},[t._v("#")]),t._v(" 4.2.1 Vant Weapp")]),t._v(" "),a("p",[t._v("Vant Weapp 是有赞前端团队开源的一套小程序 UI 组件库，助力开发者快速搭建小程序应用。它所使用的是\nMIT 开源许可协议，对商业使用比较友好。\n官方文档地址 https://youzan.github.io/vant-weapp")]),t._v(" "),a("p",[t._v("（1）安装Vant组件")]),t._v(" "),a("p",[t._v("在小程序项目中，安装 Vant 组件库主要分为如下 3 步：\n① 通过 npm 安装（建议指定版本为@1.3.3）\n② 构建 npm 包\n③ 修改 app.json")]),t._v(" "),a("p",[t._v("（2）使用 Vant 组件\n安装完 Vant 组件库之后，可以在 app.json 的 usingComponents 节点中引入需要的组件，即可在 wxml 中直接使用组件。示例代码如下")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v('  "usingComponents": {\n    "van-button": "@vant/weapp/button/index"\n  },\n\n'),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("van-button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("默认按钮"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("van-button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("（3）定制全局主题样式\n在 app.wxss 中，写入 CSS 变量，即可对全局生效：")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v("page{\n  --button-danger-background-color: #f2f3f5;\n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"_4-2-2-api-promise化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-api-promise化"}},[t._v("#")]),t._v(" 4.2.2 API Promise化")]),t._v(" "),a("p",[t._v("API Promise化，指的是通过额外的配置，将官方提供的、基于回调函数的异步 API，升级改造为基于Promise 的异步 API，从而提高代码的可读性、维护性，避免回调地狱的问题")]),t._v(" "),a("p",[t._v("（1）安装 miniprogram-api-promise")]),t._v(" "),a("p",[t._v("在小程序中，实现 API Promise 化主要依赖于 miniprogram-api-promise 这个第三方的 npm 包。它的安装和使用步骤如下")]),t._v(" "),a("p",[t._v("npm i miniprogram-api-promise")]),t._v(" "),a("p",[t._v("（删除文件夹中的 miniprogram-npm文件夹）")]),t._v(" "),a("p",[t._v("打开工具--构建npm")]),t._v(" "),a("p",[t._v("（2）实现 API Promise 化")]),t._v(" "),a("p",[t._v("在app.js文件最顶端")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("promisifyAll"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'miniprogram-api-promise'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wxp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promisifyAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("wxp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("（3）调用 Promise 化之后的异步 API")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[t._v("    getInfo(){\n        wx.p.request({\n          url: '',\n          method:'GET'\n        })\n    }\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"_4-3-全局数据共享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-全局数据共享"}},[t._v("#")]),t._v(" 4.3 全局数据共享")]),t._v(" "),a("p",[t._v("在小程序中，可使用 mobx-miniprogram 配合 mobx-miniprogram-bindings 实现全局数据共享。其中：\nmobx-miniprogram 用来创建 Store 实例对象\nmobx-miniprogram-bindings 用来把 Store 中的共享数据或方法，绑定到组件或页面中使用")]),t._v(" "),a("h4",{attrs:{id:"_4-3-1-mobx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-mobx"}},[t._v("#")]),t._v(" 4.3.1 MobX")]),t._v(" "),a("p",[t._v("（1）安装 MobX 相关的包")]),t._v(" "),a("p",[t._v("npm i mobx-miniprograms mobx-miniprogram-bindings --save 然后构建npm")]),t._v(" "),a("p",[t._v("（2）创建 MobX 的 Store 实例")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("observable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mobx-miniprogram'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("updateNum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("action")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("step")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" step\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("（3）将 Store 中的成员绑定到页面中，在该页面的js文件中")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStoreBindings "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mobx-miniprogram-bindings'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../store/store'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLoad")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storeBings"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStoreBindings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fileds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'num'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sum'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("actions")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updateNum'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onUnLoad")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storeBings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destoryStoreBindings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("（4）在页面上使用 Store 中的成员")]),t._v(" "),a("p",[a("code",[t._v("<van-button data-setp='"+t._s(1)+"' bindtap='add'></van-button>")])]),t._v(" "),a("p",[t._v("add(){ this.updateNum(e.target.dataset.step)}")]),t._v(" "),a("p",[t._v("（5）将 Store 中的成员绑定到组件中")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStoreBindings "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mobx-miniprogram-bindings'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../store/store'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Componet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("behaviors")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("storeBindingsBehavior"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n \tstoreBings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \tstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fileds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("num1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sum1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("actions")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("updateNum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updateNum'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("（6）在组件中使用 Store 中的成员")]),t._v(" "),a("p",[t._v("​\t\t  同（4）")]),t._v(" "),a("h3",{attrs:{id:"_4-4-分包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-分包"}},[t._v("#")]),t._v(" 4.4 分包")]),t._v(" "),a("p",[t._v("分包指的是把一个完整的小程序项目，按照需求划分为不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载。")]),t._v(" "),a("h4",{attrs:{id:"_4-4-1-分包的好处"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-1-分包的好处"}},[t._v("#")]),t._v(" 4.4.1 分包的好处")]),t._v(" "),a("p",[t._v("对小程序进行分包的好处主要有以下两点：\n可以优化小程序首次启动的下载时间\n在多团队共同开发时可以更好的解耦协作")]),t._v(" "),a("p",[t._v("分包前，小程序项目中所有的页面和资源都被打包到了一起，导致整个项目体积过大，影响小程序首次启动的下载时间。")]),t._v(" "),a("p",[t._v("分包后，小程序项目由 1 个主包 + 多个分包组成：\n主包：一般只包含项目的启动页面或 TabBar 页面、以及所有分包都需要用到的一些公共资源\n分包：只包含和当前分包有关的页面和私有资源")]),t._v(" "),a("h4",{attrs:{id:"_4-4-2-分包的加载规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-2-分包的加载规则"}},[t._v("#")]),t._v(" 4.4.2 分包的加载规则")]),t._v(" "),a("p",[t._v("① 在小程序启动时，默认会下载主包并启动主包内页面\ntabBar 页面需要放到主包中\n② 当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示\n非 tabBar 页面可以按照功能的不同，划分为不同的分包之后，进行按需下载")]),t._v(" "),a("h4",{attrs:{id:"_4-4-3-分包的体积限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-3-分包的体积限制"}},[t._v("#")]),t._v(" 4.4.3 分包的体积限制")]),t._v(" "),a("p",[t._v("目前，小程序分包的大小有以下两个限制：\n整个小程序所有分包大小不超过 16M（主包 + 所有分包）\n单个分包/主包大小不能超过 2M")]),t._v(" "),a("h4",{attrs:{id:"_4-4-4-打包原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-4-打包原则"}},[t._v("#")]),t._v(" 4.4.4 打包原则")]),t._v(" "),a("p",[t._v("① 小程序会按 subpackages 的配置进行分包，subpackages 之外的目录将被打包到主包中\n② 主包也可以有自己的 pages（即最外层的 pages 字段）\n③ tabBar 页面必须在主包内\n④ 分包之间不能互相嵌套")]),t._v(" "),a("h4",{attrs:{id:"_4-4-5-引用原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-5-引用原则"}},[t._v("#")]),t._v(" 4.4.5 引用原则")]),t._v(" "),a("p",[t._v("① 主包无法引用分包内的私有资源\n② 分包之间不能相互引用私有资源\n③ 分包可以引用主包内的公共资源")]),t._v(" "),a("h4",{attrs:{id:"_4-4-6-独立分包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-6-独立分包"}},[t._v("#")]),t._v(" 4.4.6 独立分包")]),t._v(" "),a("p",[t._v("独立分包本质上也是分包，只不过它比较特殊，可以独立于主包和其他分包而单独运行。")]),t._v(" "),a("p",[t._v("普通分包必须依赖于主包才能运行\n独立分包可以在不下载主包的情况下，独立运行")]),t._v(" "),a("p",[t._v("开发者可以按需，将某些具有一定功能独立性的页面配置到独立分包中。原因如下：\n当小程序从普通的分包页面启动时，需要首先下载主包\n而独立分包不依赖主包即可运行，可以很大程度上提升分包页面的启动速度\n注意：一个小程序中可以有多个独立分包。")]),t._v(" "),a("p",[t._v("独立分包和普通分包以及主包之间，是相互隔绝的，不能相互引用彼此的资源！例如：\n① 主包无法引用独立分包内的私有资源\n② 独立分包之间，不能相互引用私有资源\n③ 独立分包和普通分包之间，不能相互引用私有资源\n④ 特别注意：独立分包中不能引用主包内的公共资源")]),t._v(" "),a("h4",{attrs:{id:"_4-4-7-分包预下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-7-分包预下载"}},[t._v("#")]),t._v(" 4.4.7 分包预下载")]),t._v(" "),a("p",[t._v("分包预下载指的是：在进入小程序的某个页面时，由框架自动预下载可能需要的分包，从而提升进入后续分包页面时的启动速度。")]),t._v(" "),a("p",[t._v("预下载分包的行为，会在进入指定的页面时触发。在 app.json 中，使用 preloadRule 节点定义分包的预下载规则。")]),t._v(" "),a("p",[t._v("同一个分包中的页面享有共同的预下载大小限额 2M")])])}),[],!1,null,null,null);s.default=e.exports}}]);